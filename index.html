<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>200 days of streak</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <div class="content">
            <h1 class="title">Something Special Awaits</h1>
            <p class="subtitle">Click the button below for a surprise!</p>
            <button class="surprise-btn" id="surpriseBtn">
                <span class="btn-text">Click Me!</span>
                <div class="btn-sparkles">
                    <span class="sparkle"></span>
                    <span class="sparkle"></span>
                    <span class="sparkle"></span>
                </div>
            </button>
        </div>

        <!-- Balloon Container -->
        <div class="balloon-container" id="balloonContainer">
            <div class="balloon">
                <div class="balloon-body"></div>
                <div class="balloon-string"></div>
                <div class="balloon-message">
                    <h2>WELCOME TO</h2>
                    <h1>200 STREAK</h1>
                    <h2>BISOLA</h2>
                    <div class="celebration-emojis">ðŸŽ‰âœ¨ðŸŽˆ</div>
                </div>
            </div>
            <div class="confetti">
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
                <div class="confetti-piece"></div>
            </div>
        </div>
    </div>

<script>
  const surpriseBtn = document.getElementById('surpriseBtn');
  const balloonContainer = document.getElementById('balloonContainer');

  // Better mobile audio handling
  const createAudio = () => {
    try {
      return new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YRAAAA==");
    } catch (e) {
      return null;
    }
  };

  const fanfare = createAudio();
  const pop = createAudio();

  // Enhanced touch feedback with better mobile support
  let touchStarted = false;

  surpriseBtn.addEventListener('touchstart', (e) => {
    e.preventDefault(); // Prevent double-tap zoom
    touchStarted = true;
    surpriseBtn.classList.add('touch-pressed');
  }, { passive: false });

  surpriseBtn.addEventListener('touchend', (e) => {
    e.preventDefault();
    surpriseBtn.classList.remove('touch-pressed');
    if (touchStarted) {
      handleSurpriseClick();
    }
    touchStarted = false;
  }, { passive: false });

  surpriseBtn.addEventListener('touchcancel', () => {
    surpriseBtn.classList.remove('touch-pressed');
    touchStarted = false;
  });

  // Mouse events for desktop
  surpriseBtn.addEventListener('mousedown', () => {
    if (!touchStarted) {
      surpriseBtn.classList.add('touch-pressed');
    }
  });

  surpriseBtn.addEventListener('mouseup', () => {
    surpriseBtn.classList.remove('touch-pressed');
  });

  surpriseBtn.addEventListener('mouseleave', () => {
    surpriseBtn.classList.remove('touch-pressed');
  });

  surpriseBtn.addEventListener('click', (e) => {
    if (!touchStarted) {
      handleSurpriseClick();
    }
  });

  function handleSurpriseClick() {
    // Force hardware acceleration trigger
    balloonContainer.style.transform = 'translateZ(0)';
    
    // Show celebration with forced reflow
    balloonContainer.classList.add('show');
    
    // Force browser to recalculate layout
    balloonContainer.offsetHeight;
    
    // Hide button after animation starts
    setTimeout(() => {
      surpriseBtn.style.display = 'none';
    }, 100);

    // Play sounds with better mobile support
    if (pop) {
      pop.currentTime = 0;
      pop.play().catch(() => {});
    }
    
    setTimeout(() => {
      if (fanfare) {
        fanfare.currentTime = 0;
        fanfare.play().catch(() => {});
      }
    }, 250);
  }

  // Click anywhere to hide balloon and restore button
  balloonContainer.addEventListener('click', function(e) {
    // Prevent immediate re-trigger
    e.stopPropagation();
    
    balloonContainer.classList.remove('show');
    setTimeout(() => {
      surpriseBtn.style.display = 'inline-block';
      surpriseBtn.classList.remove('touch-pressed');
    }, 500);
  });

  // Prevent context menu on long press (mobile)
  document.addEventListener('contextmenu', (e) => {
    if (e.target === surpriseBtn) {
      e.preventDefault();
    }
  });
</script>

</body>
</html>
